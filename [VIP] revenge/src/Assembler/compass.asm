; ************************************************************************************************************
; ************************************************************************************************************
;
;											Update Compass
;
; ************************************************************************************************************
; ************************************************************************************************************

UpdateCompass:
	lri 	re,buffer+7 														; write position
	lri 	rf,direction 														; get direction
	ldn 	rf
	ani 	3	
	shl 																		; x 8
	shl
	shl
	adi 	__UCGraphics & 255 													; add to compass graphics
	plo 	rf
	ldi 	__UCGraphics / 256
	phi 	rf
__UCDraw:
	lda 	rf
	str 	re
	glo 	re
	adi 	8
	plo 	re
	xri 	7+8*8
	bnz 	__UCDraw
	return

__UCGraphics:
	db  00011100b
	db  00100010b
	db  01000001b
	db  01001111b
	db  01000001b
	db  00100010b
	db  00011100b
	db 	00000000b

	db  00011100b
	db  00100010b
	db  01000001b
	db  01001001b
	db  01001001b
	db  00101010b
	db  00011100b
	db 	00000000b

	db  00011100b
	db  00100010b
	db  01000001b
	db  01111001b
	db  01000001b
	db  00100010b
	db  00011100b
	db 	00000000b

	db  00011100b
	db  00101010b
	db  01001001b
	db  01001001b
	db  01000001b
	db  00100010b
	db  00011100b
	db 	00000000b
